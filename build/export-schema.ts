import { writeFileSync } from "node:fs";
import { join } from "node:path";
import { fileURLToPath } from "node:url";
import { z } from "zod/v4";
import { indexSchema } from "../src/read-index.file";

const __dirname = fileURLToPath(new URL(".", import.meta.url));
const jsonSchema = {
  $comment: "Auto-generated by build/export-schema.ts. Do not edit manually.",
  $id: "https://raw.githubusercontent.com/pawcoding/markdown-mcp-resource/refs/heads/master/schema.json",
  ...z.toJSONSchema(indexSchema, {
    io: "input"
  })
};
const filePath = join(__dirname, "../schema.json");

writeFileSync(filePath, JSON.stringify(jsonSchema, null, 2));
console.log(`Wrote JSON schema to ${filePath}`);
